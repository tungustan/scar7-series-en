<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Bunny Player</title>
    <!-- 1. 라이브러리 로드 -->
    <script src="https://assets.mediadelivery.net"></script>
    <style>
        body { background-color: black; color: white; text-align: center; padding: 20px; font-family: sans-serif; }
        .container { position: relative; padding-top: 56.25%; width: 100%; max-width: 800px; margin: auto; border: 1px solid #333; }
        iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
        h2 { font-size: 1.1rem; color: #ccc; }
    </style>
</head>
<body>
    <h2 id="status">준비 중...</h2>
    <div class="container">
        <iframe id="video-iframe" src="" allow="autoplay; fullscreen" allowfullscreen></iframe>
    </div>

    <script>
        // [수정] 본인의 영상 제목과 ID를 정확히 입력하세요.
        const myVideos = [
            { title: "EP01", id: "17b2f4f3-96ff-40e7-9462-2eaed6bab2c2" },
            { title: "EP02", id: "fd9b1c33-d2e4-4c99-b68e-082c88d423bf" },
            { title: "EP03", id: "200ca492-a946-49b5-9adb-d8e4a200146d" }
        ];

        // 이름순 정렬
        myVideos.sort((a, b) => a.title.localeCompare(b.title, 'en'));

        let currentIdx = 0;
        const iframe = document.getElementById('video-iframe');
        const status = document.getElementById('status');

        function playVideo(index) {
            if (index >= myVideos.length) {
                status.innerText = "모든 재생 완료 ✨";
                return;
            }

            const video = myVideos[index];
            status.innerText = "현재 재생 (" + (index + 1) + "/" + myVideos.length + "): " + video.title;

            // 주소 설정 (ID: 603825)
            iframe.src = "https://iframe.mediadelivery.net" + video.id + "?autoplay=true&muted=true";

            // [해결책] playerjs가 로드되었는지 확인 후 실행
            if (typeof playerjs !== 'undefined') {
                const player = new playerjs.Player(iframe);
                player.on('ready', function() {
                    player.on('ended', function() {
                        currentIdx++;
                        playVideo(currentIdx);
                    });
                });
            } else {
                // 아직 로드 안 됐다면 0.5초 뒤에 다시 시도
                setTimeout(() => playVideo(index), 500);
            }
        }

        // 페이지 로딩 완료 후 시작
        window.onload = function() {
            if (myVideos.length > 0) {
                playVideo(0);
            }
        };
    </script>
</body>
</html>
