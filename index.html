<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bunny.net 자동재생 플레이어</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    background-color: black;
  }
  #player {
    width: 100%;
    height: 100%;
  }
</style>
<!-- Bunny.net Player SDK -->
<script src="https://play.bunnycdn.com/player/latest/bunny-player.min.js"></script>
</head>
<body>

<div id="player"></div>

<script>
  // Bunny.net 스트림 라이브러리 ID
  const libraryId = 603825;

  // Bunny.net 라이브러리 API: 스트림 정보 가져오기
  const apiUrl = `https://video.bunnycdn.com/library/${libraryId}/videos`;

  fetch(apiUrl)
    .then(res => res.json())
    .then(data => {
      // 1. 이름순 정렬
      const videos = data.Items.sort((a, b) => a.Title.localeCompare(b.Title));
      let currentIndex = 0;

      // 2. 플레이어 초기화
      const player = new BunnyPlayer('#player', {
        video: videos[currentIndex].Url, // HLS 링크
        autoplay: true,
        muted: false,
        loop: false,
        width: '100%',
        height: '100%',
        fullscreen: true
      });

      // 3. 비디오 끝나면 다음 비디오 재생
      player.on('ended', () => {
        currentIndex++;
        if (currentIndex < videos.length) {
          player.load(videos[currentIndex].Url);
          player.play();
        }
      });
    })
    .catch(err => console.error('스트림 라이브러리를 가져오는데 실패했습니다:', err));
</script>

</body>
</html>
